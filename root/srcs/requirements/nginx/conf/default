server {
    # listen on port 443 with SSL enabled
    listen 443 ssl;

    # define server names that NGINX will respond to
    server_name localhost ${LOGIN}.42.fr;

    # set root directory where website files are stored
    root /var/www/html;

    # SSL certificate
    ssl_certificate ${SSL_CERTIFICATE};         #path to the ssl certif file
    ssl_certificate_key ${SSL_CERTIFICATE_KEY}; #path to the ssl private key
    ssl_protocols TLSv1.3;                       #only enable TLS 1.3 (secure protocol)

    # default file to serve
    index index.php;

    # Main location block for all requests
    location / {
        # try to serve the exact URI, then URI/, then return 404
        try_files $uri $uri/ =404;
    }

    # Location block for php files
    location ~ \.php$ {
        # pass PHP requests to Wordpress container
        fastcgi_pass wordpress:9000; #wordpress is the container name, 9000 is PHP_FPM port
        include fastcgi.conf;        #include FastCGI settings
        # set the script file name for PHP-FPM
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;     #include additional FastCGI parameters
    }
}
